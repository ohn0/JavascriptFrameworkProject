<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            body{
                background-color: black;
            }
        </style>
    </head>
    <body>
        <div id="mainDIV"></div>
        <script> 
            "use strict";
            function my$(id){
                return document.getElementById(id);
            }
            
            var mainDiv = my$("mainDIV");
            mainDiv.style.height = "80vh";
            mainDiv.style.width = "80%";
            mainDiv.style.margin = "auto";
            mainDiv.style.backgroundColor = "#496ba0";
            mainDiv.style.lineHeight = "0px";
            var imageList = ["images", "more images later"];
            function Framework(){
                var collage = {};
                collage.makeCollage = function(params){
                    var newCollage = {};
                    var boxArray = params.boxArray;
                    var parentDIV = params.parent;
                    var imageNames = params.imageNames || null;
                    var rowLength = params.rowLength;
                    var colLength = params.colLength;;
                    var boxHeight = Math.ceil(100 / colLength);
                    var boxWidth = Math.floor(100 / rowLength);
                    var divCount = 0;
                    console.log("Parent div is called: " + parentDIV.id);
                    var divList = [];
                    console.log("Width of an individual box: " + boxWidth +
                            "\nHeight of an individual box: " + boxHeight);
                    for(var i = 0; i < colLength; i++){
                        if(boxArray[i].length !== rowLength || boxArray.length !== colLength){
                            alert("Number of rows/cols in array does not match "+
                                  "number of rows/cols set as input.");
                            return null;
                        }
                    }
                    
                    if(imageNames === null){
                        alert("No images attached.");
                    }

                    function makeDiv(params){
                        console.log("Making a new div!");
                        var box = document.createElement("div");
                        box.id = parentDIV.id + String(divCount);
                        divCount++;
                        box.style.height = boxHeight + "%";
                        box.style.width = boxWidth + "%";
                        box.style.boxSizing = "border-box";
                        box.style.borderStyle = "solid";
                        box.style.borderWidth = "1px";
                        box.style.borderColor = "red";
                        box.style.display= "inline-block";
                        box.style.zIndex = 1;
                        box.style.backgroundColor = "white";
                        box.style.margin = "0px";
                        box.style.top = params.divYlocation + "%";  
                        box.style.left = params.divXlocation + "%";
                        box.style.width = params.width + "%";
                        box.style.backgroundImage = imageNames[i % 
                            (imageNames.length < )]
                        parentDIV.appendChild(box);
                        divList.push(String(box.id));
                    }        

                    newCollage.makeBoxes = function(){
                        var divWidth = 0;
                        var Xval = 0;
                        var Yval = 0;
                        for(var i = 0; i < colLength; i++){
                            var currentVal = boxArray[i][0];
                            divWidth = 0;
                            Yval += boxHeight;
                            for(var j = 0; j <= rowLength-1; j++){
                                divWidth += boxWidth;
                                Xval += boxWidth;
                                if(boxArray[i][j+1] !== currentVal){
                                    makeDiv({
                                        width: divWidth,
                                        divXlocation: Xval,
                                        divYlocation: Yval 
                                   });
                                   currentVal = boxArray[i][j+1];
                                   divWidth = 0;
                                }
                            }
                        }
                        return null;
                    };
                    
                    newCollage.listBoxes = function(){
                        for(var i = 0; i < divCount; i++){
                            console.log(divList[i]);
                        }
                    };
                    
                    newCollage.boxCount = function(){
                        return divList.length;
                    };
                    
                    newCollage.getBox = function(boxIndex){
                        if(boxIndex < divList.length){
                            return divList[boxIndex];
                        }
                        else{
                            alert("The box that you want to access does not exist.");
                        }
                    };
                    return newCollage;
                };
                return collage;
            }
  
            var collageDrawing = [[1,1,1,1,1,1,1,1,1,1],
                                  [1,1,1,0,1,1,0,1,1,1],
                                  [1,1,1,1,1,1,1,1,1,1]];
//            var collageDrawing = [[1,0],
//                                  [0,1]];

            var imageList = ['imgA.gif', 'imgB.jpg', 'imgC.png',
                             'imgD.png', 'imgE.jpg', 'imgF.gif',
                             'imgG.png', 'imgH.jpg', 'imgI.jpg',
                             'imgJ.png', 'imgK.jpg'];
            var FW = Framework();
            var collageA = FW.makeCollage({
                parent: mainDiv,
                boxArray: collageDrawing,
                boxWidth: 50,
                boxHeight: 50,
                imageNames: imageList,
                rowLength: 10,
                colLength: 3
            });
            if(collageA !== null){
                collageA.makeBoxes();
                collageA.listBoxes();
//                var box3 = collageA.getBox(3);
//                my$(box3).style.backgroundColor = "cyan";
//                console.log(collageA.rowLength);
                var boxCountA = collageA.boxCount();
                for(var i = 0; i < boxCountA; i++){
                    my$(collageA.getBox(i)).style.backgroundColor = "rgb"+"(" + 
                                        parseInt(Math.random() * 255) +", "
                                        +parseInt(Math.random() * 255)+", "
                                        +parseInt(Math.random() * 255)+")";
                }
            }

    
            
        </script>
    </body>
</html>
